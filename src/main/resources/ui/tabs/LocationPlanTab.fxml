<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.canvas.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
      fx:controller="zakir.alekperov.ui.tabs.locationplan.LocationPlanTabController"
      spacing="10" style="-fx-background-color: #f5f5f5;">
    <padding><Insets top="15" right="15" bottom="15" left="15"/></padding>

    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
    <Label text="ðŸ“ Ð¡Ð¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
    <Separator/>

    <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
    <HBox spacing="15" VBox.vgrow="ALWAYS">
        <!-- Ð›ÐµÐ²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ -->
        <VBox spacing="10" prefWidth="350" style="-fx-background-color: white; -fx-padding: 15; -fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-radius: 5;">
            <Label text="ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <Separator/>

            <!-- ÐœÐ°ÑÑˆÑ‚Ð°Ð± -->
            <Label text="ÐœÐ°ÑÑˆÑ‚Ð°Ð± Ð¿Ð»Ð°Ð½Ð° (1:X):" style="-fx-font-size: 12px;"/>
            <ComboBox fx:id="scaleComboBox" prefWidth="Infinity" promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±"/>

            <!-- Ð”Ð°Ñ‚Ð° ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
            <Label text="Ð”Ð°Ñ‚Ð° ÑÐ¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ñ:" style="-fx-font-size: 12px;"/>
            <DatePicker fx:id="creationDatePicker" prefWidth="Infinity"/>

            <!-- Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ -->
            <Label text="Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ:" style="-fx-font-size: 12px;"/>
            <TextField fx:id="authorField" promptText="Ð¤Ð˜Ðž Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ"/>

            <!-- ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ -->
            <Label text="ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ:" style="-fx-font-size: 12px;"/>
            <TextArea fx:id="notesArea" promptText="Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ" prefRowCount="3"/>

            <Separator/>
            
            <!-- ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð¡Ð•Ð¢ÐšÐ˜ -->
            <Label text="ðŸ”² ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐµÑ‚ÐºÐ¸" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
            
            <!-- Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÑ‚ÐºÐ¸ -->
            <CheckBox fx:id="gridVisibleCheckBox" text="ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ ÑÐµÑ‚ÐºÑƒ" selected="true" 
                      onAction="#handleGridVisibilityChange"
                      style="-fx-font-size: 12px;"/>
            
            <!-- Ð¨Ð°Ð³ ÑÐµÑ‚ÐºÐ¸ -->
            <Label text="Ð¨Ð°Ð³ ÑÐµÑ‚ÐºÐ¸ (Ð¼ÐµÑ‚Ñ€Ñ‹):" style="-fx-font-size: 12px;"/>
            <ComboBox fx:id="gridSizeComboBox" prefWidth="Infinity" 
                      onAction="#handleGridSizeChange"
                      promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑˆÐ°Ð³"/>

            <Separator/>
            
            <!-- Ð˜ÐÐ¡Ð¢Ð Ð£ÐœÐ•ÐÐ¢ Ð˜Ð—ÐœÐ•Ð Ð•ÐÐ˜Ð¯ -->
            <Label text="ðŸ“ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ" style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #FF5722;"/>
            
            <!-- Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ -->
            <CheckBox fx:id="measurementActiveCheckBox" text="ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ðµ" selected="false" 
                      onAction="#handleMeasurementActiveChange"
                      style="-fx-font-size: 12px;"/>
            
            <!-- Ð ÐµÐ¶Ð¸Ð¼ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ -->
            <Label text="Ð ÐµÐ¶Ð¸Ð¼ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ:" style="-fx-font-size: 12px;"/>
            <ComboBox fx:id="measurementModeComboBox" prefWidth="Infinity" 
                      onAction="#handleMeasurementModeChange"
                      promptText="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€ÐµÐ¶Ð¸Ð¼"/>
            
            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ¸ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ð¹ -->
            <Button fx:id="clearMeasurementButton" text="ðŸ—‘ï¸ ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ðµ" 
                    onAction="#handleClearMeasurement"
                    prefWidth="Infinity"
                    style="-fx-font-size: 11px; -fx-background-color: #FF9800; -fx-text-fill: white;"/>
            
            <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾Ð± Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ð¸ -->
            <Label fx:id="measurementInfoLabel" text="" wrapText="true"
                   style="-fx-font-size: 11px; -fx-text-fill: #666; -fx-padding: 5;"/>

            <Separator/>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ -->
            <HBox spacing="10">
                <Button fx:id="saveButton" text="ðŸ’¾ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" onAction="#handleSave" 
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                <Button fx:id="clearButton" text="ðŸ—‘ï¸ ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" onAction="#handleClear"
                        style="-fx-background-color: #f44336; -fx-text-fill: white;"/>
            </HBox>
        </VBox>

        <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ -->
        <VBox spacing="10" HBox.hgrow="ALWAYS" 
              style="-fx-background-color: white; -fx-padding: 15; -fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-radius: 5;">
            
            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="ðŸ—ºï¸ Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð·Ð´Ð°Ð½Ð¸Ð¹" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                
                <!-- ÐŸÑ€Ð¾ÐºÐ»Ð°Ð´ÐºÐ° -->
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ -->
                <HBox spacing="5" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-border-radius: 3; -fx-background-radius: 3; -fx-padding: 2;">
                    <Button fx:id="zoomInButton" text="âž•" onAction="#handleZoomIn"
                            style="-fx-font-size: 12px; -fx-padding: 5 10; -fx-background-color: #2196F3; -fx-text-fill: white;">
                        <tooltip><Tooltip text="Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ñ‚ÑŒ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±"/></tooltip>
                    </Button>
                    <Button fx:id="zoomOutButton" text="âž–" onAction="#handleZoomOut"
                            style="-fx-font-size: 12px; -fx-padding: 5 10; -fx-background-color: #2196F3; -fx-text-fill: white;">
                        <tooltip><Tooltip text="Ð£Ð¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚ÑŒ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±"/></tooltip>
                    </Button>
                    <Button fx:id="zoomResetButton" text="ðŸŽ¯" onAction="#handleZoomReset"
                            style="-fx-font-size: 12px; -fx-padding: 5 10; -fx-background-color: #607D8B; -fx-text-fill: white;">
                        <tooltip><Tooltip text="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±"/></tooltip>
                    </Button>
                </HBox>
            </HBox>
            
            <Separator/>

            <!-- Canvas Ð´Ð»Ñ Ð¾Ñ‚Ñ€Ð¸ÑÐ¾Ð²ÐºÐ¸ -->
            <StackPane fx:id="canvasContainer" VBox.vgrow="ALWAYS" 
                       style="-fx-background-color: #fafafa; -fx-border-color: #ccc; -fx-border-width: 1;">
                <Canvas fx:id="buildingCanvas"/>
                <Label fx:id="canvasPlaceholder" text="Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð·Ð´Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ" 
                       style="-fx-text-fill: #999; -fx-font-size: 14px;"/>
            </StackPane>

            <!-- Ð›ÐµÐ³ÐµÐ½Ð´Ð° Ð¸ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¼ Ð·Ð´Ð°Ð½Ð¸Ð¸ -->
            <VBox spacing="5">
                <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¼ Ð·Ð´Ð°Ð½Ð¸Ð¸ -->
                <HBox style="-fx-background-color: #e8f5e9; -fx-padding: 8; -fx-border-radius: 4; -fx-background-radius: 4;">
                    <Label fx:id="selectedBuildingLabel" text="ÐšÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ Ð¿Ð¾ Ð·Ð´Ð°Ð½Ð¸ÑŽ Ð´Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð°. Alt+Ð›ÐšÐœ Ð½Ð° Ñ‚Ð¾Ñ‡ÐºÐµ - Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ." 
                           style="-fx-font-size: 11px; -fx-text-fill: #999;" wrapText="true" HBox.hgrow="ALWAYS"/>
                </HBox>
                
                <!-- Ð›ÐµÐ³ÐµÐ½Ð´Ð° Ð¸ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ -->
                <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-padding: 5;">
                    <Label text="Ð›ÐµÐ³ÐµÐ½Ð´Ð°:" style="-fx-font-weight: bold; -fx-font-size: 11px;"/>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #2196F3; -fx-font-size: 16px;"/>
                        <Label text="ÐžÐ±Ñ‹Ñ‡Ð½Ð¾Ðµ" style="-fx-font-size: 10px;"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #FF9800; -fx-font-size: 16px;"/>
                        <Label text="Hover" style="-fx-font-size: 10px;"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #4CAF50; -fx-font-size: 16px;"/>
                        <Label text="Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð¾" style="-fx-font-size: 10px;"/>
                    </HBox>
                    <HBox spacing="5" alignment="CENTER_LEFT">
                        <Label text="â—" style="-fx-text-fill: #FF5722; -fx-font-size: 16px;"/>
                        <Label text="Ð˜Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ðµ" style="-fx-font-size: 10px;"/>
                    </HBox>
                    
                    <!-- ÐŸÑ€Ð¾ÐºÐ»Ð°Ð´ÐºÐ° -->
                    <Region HBox.hgrow="ALWAYS"/>
                    
                    <!-- ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ° Ð¾Ð± ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ -->
                    <VBox spacing="2" alignment="CENTER_RIGHT">
                        <Label text="ðŸ–±ï¸ Ctrl+Ð›ÐšÐœ - Ð¿ÐµÑ€ÐµÐ¼ÐµÑ‰ÐµÐ½Ð¸Ðµ | ðŸ” ÐšÐ¾Ð»ÐµÑÐ¾ - zoom" 
                               style="-fx-font-size: 9px; -fx-text-fill: #666;"/>
                        <Label text="âœï¸ Alt+Ð›ÐšÐœ - Ð¿ÐµÑ€ÐµÑ‚Ð°ÑÐºÐ¸Ð²Ð°Ð½Ð¸Ðµ Ñ‚Ð¾Ñ‡ÐºÐ¸ | ðŸ–±ï¸ ÐšÐ»Ð¸Ðº - Ð²Ñ‹Ð±Ð¾Ñ€" 
                               style="-fx-font-size: 9px; -fx-text-fill: #666;"/>
                        <Label text="ðŸ“ Ð ÐµÐ¶Ð¸Ð¼ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ: ÐºÐ»Ð¸Ðº Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð¾Ñ‡ÐµÐº" 
                               style="-fx-font-size: 9px; -fx-text-fill: #FF5722;"/>
                    </VBox>
                </HBox>
            </VBox>
        </VBox>

        <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð´Ð°Ð½Ð¸Ð¹ -->
        <VBox spacing="10" prefWidth="320" 
              style="-fx-background-color: white; -fx-padding: 15; -fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-radius: 5;">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð´Ð°Ð½Ð¸Ð¹" style="-fx-font-size: 14px; -fx-font-weight: bold;" HBox.hgrow="ALWAYS"/>
                <Button fx:id="addCoordinatesButton" text="+ Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ" onAction="#handleAddCoordinates"
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 11px;"/>
            </HBox>
            <Separator/>

            <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð´Ð°Ð½Ð¸Ð¹ -->
            <ListView fx:id="buildingsListView" VBox.vgrow="ALWAYS"/>
        </VBox>
    </HBox>
</VBox>
