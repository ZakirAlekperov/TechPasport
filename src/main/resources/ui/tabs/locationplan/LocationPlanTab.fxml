<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            prefHeight="600.0" prefWidth="900.0"
            stylesheets="@/ui/styles/app.css">

    <padding>
        <Insets top="15" right="15" bottom="15" left="15"/>
    </padding>

    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
    <top>
        <VBox spacing="10">
            <Label text="4. Ð¡Ð¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½" styleClass="section-title"/>
            <Separator/>
        </VBox>
    </top>

    <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ -->
    <center>
        <SplitPane dividerPositions="0.5" orientation="HORIZONTAL">
            
            <!-- Ð›ÐµÐ²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ - Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ð½Ð° -->
            <VBox spacing="15" style="-fx-padding: 10;">
                <Label text="ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð»Ð°Ð½Ð°" styleClass="subsection-title"/>
                
                <!-- ÐœÐ°ÑÑˆÑ‚Ð°Ð± -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ÐœÐ°ÑÑˆÑ‚Ð°Ð±:" prefWidth="120"/>
                    <ComboBox fx:id="scaleComboBox" prefWidth="150"/>
                </HBox>
                
                <!-- Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ:" prefWidth="120"/>
                    <DatePicker fx:id="creationDatePicker" prefWidth="150"/>
                </HBox>
                
                <!-- Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ:" prefWidth="120"/>
                    <TextField fx:id="authorField" prefWidth="200" promptText="Ð¤Ð˜Ðž Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ"/>
                </HBox>
                
                <Separator/>
                
                <!-- Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð»Ð°Ð½Ð° -->
                <VBox spacing="10">
                    <Label text="Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð»Ð°Ð½Ð°" styleClass="subsection-title"/>
                    
                    <StackPane prefHeight="250" style="-fx-border-color: #cccccc; -fx-border-width: 1; -fx-background-color: #f9f9f9;">
                        <ImageView fx:id="planImageView" 
                                   fitWidth="280" 
                                   fitHeight="240" 
                                   preserveRatio="true"/>
                        <Label fx:id="placeholderLabel" 
                               text="ÐÐµÑ‚ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ\nÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ 'Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ' Ð´Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð° Ñ„Ð°Ð¹Ð»Ð°" 
                               style="-fx-text-fill: #999999; -fx-text-alignment: center;"/>
                    </StackPane>
                    
                    <Label fx:id="imageInfoLabel" 
                           text="Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾" 
                           style="-fx-font-size: 11px; -fx-text-fill: #666666;"/>
                    
                    <HBox spacing="10">
                        <Button fx:id="loadImageButton" text="Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ..." onAction="#handleLoadImage"/>
                        <Button fx:id="removeImageButton" text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" onAction="#handleRemoveImage" disable="true"/>
                    </HBox>
                </VBox>
                
                <Separator/>
                
                <!-- ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ -->
                <VBox spacing="5" VBox.vgrow="ALWAYS">
                    <Label text="ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ:"/>
                    <TextArea fx:id="notesArea" 
                             promptText="Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ Ðº ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð¼Ñƒ Ð¿Ð»Ð°Ð½Ñƒ"
                             wrapText="true"
                             prefRowCount="4"
                             VBox.vgrow="ALWAYS"/>
                </VBox>
            </VBox>
            
            <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ - ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð·Ð´Ð°Ð½Ð¸Ð¹ -->
            <VBox spacing="15" style="-fx-padding: 10;">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð·Ð´Ð°Ð½Ð¸Ð¹" styleClass="subsection-title" HBox.hgrow="ALWAYS"/>
                    <Button fx:id="addCoordinatesButton" 
                            text="+ Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð´Ð°Ð½Ð¸Ðµ" 
                            onAction="#handleAddCoordinates"
                            style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                </HBox>
                
                <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð´Ð°Ð½Ð¸Ð¹ -->
                <ListView fx:id="buildingsListView" 
                         VBox.vgrow="ALWAYS"
                         style="-fx-border-color: #cccccc; -fx-border-width: 1;"/>
                
                <HBox spacing="10">
                    <Label text="Ð’ÑÐµÐ³Ð¾ Ð·Ð´Ð°Ð½Ð¸Ð¹:" style="-fx-font-weight: bold;"/>
                    <Label fx:id="buildingCountLabel" text="0" style="-fx-text-fill: #2196F3; -fx-font-weight: bold;"/>
                </HBox>
                
                <VBox spacing="5" style="-fx-padding: 10; -fx-background-color: #e3f2fd; -fx-border-radius: 5; -fx-background-radius: 5;">
                    <Label text="â„¹ï¸ Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ" style="-fx-font-weight: bold;"/>
                    <Label text="â€¢ ÐœÐ°ÑÑˆÑ‚Ð°Ð± ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ 1:500" wrapText="true"/>
                    <Label text="â€¢ ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð·Ð´Ð°Ð½Ð¸Ð¹ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ Ð¾Ñ‚Ð½Ð¾ÑÐ¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð³Ñ€Ð°Ð½Ð¸Ñ† ÑƒÑ‡Ð°ÑÑ‚ÐºÐ°" wrapText="true"/>
                    <Label text="â€¢ ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 3 Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð·Ð´Ð°Ð½Ð¸Ñ" wrapText="true"/>
                </VBox>
            </VBox>
            
        </SplitPane>
    </center>

    <!-- ÐÐ¸Ð¶Ð½ÑÑ Ð¿Ð°Ð½ÐµÐ»ÑŒ - ÐºÐ½Ð¾Ð¿ÐºÐ¸ -->
    <bottom>
        <VBox spacing="10">
            <Separator/>
            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Button fx:id="saveButton" 
                        text="ðŸ’¾ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" 
                        onAction="#handleSave" 
                        styleClass="primary-button"
                        prefWidth="120"/>
                <Button fx:id="clearButton" 
                        text="ðŸ—‘ï¸ ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" 
                        onAction="#handleClear"
                        prefWidth="120"/>
            </HBox>
        </VBox>
    </bottom>

</BorderPane>
