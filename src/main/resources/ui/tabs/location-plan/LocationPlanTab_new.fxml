<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="zakir.alekperov.ui.tabs.locationplan.LocationPlanTabController"
      spacing="10" style="-fx-padding: 15;">
    
    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
    <Label text="ðŸ—ºï¸ Ð¡Ð¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½" 
           style="-fx-font-size: 18; -fx-font-weight: bold;"/>
    
    <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ð»Ð°Ð½Ðµ -->
    <HBox spacing="15" alignment="CENTER_LEFT">
        <Label text="ÐœÐ°ÑÑˆÑ‚Ð°Ð± 1:"/>
        <ComboBox fx:id="scaleComboBox" prefWidth="120"/>
        
        <Label text="Ð”Ð°Ñ‚Ð°:"/>
        <DatePicker fx:id="creationDatePicker" prefWidth="150"/>
        
        <Label text="Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ:"/>
        <TextField fx:id="authorField" prefWidth="200" promptText="Ð¤Ð˜Ðž"/>
    </HBox>
    
    <Separator/>
    
    <!-- Ð“Ð»Ð°Ð²Ð½Ð°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ: Canvas + Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð´Ð°Ð½Ð¸Ð¹ -->
    <HBox spacing="10" VBox.vgrow="ALWAYS">
        
        <!-- Ð›ÐµÐ²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð´Ð°Ð½Ð¸Ð¹ -->
        <VBox spacing="8" prefWidth="280" minWidth="250">
            <Label text="ðŸ—ï¸ Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð´Ð°Ð½Ð¸Ð¹" style="-fx-font-weight: bold;"/>
            
            <Button fx:id="addCoordinatesButton" text="+ Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð´Ð°Ð½Ð¸Ðµ" 
                    onAction="#handleAddCoordinates" maxWidth="Infinity"
                    style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
            
            <ListView fx:id="buildingsListView" VBox.vgrow="ALWAYS" 
                      style="-fx-background-color: #fafafa;"/>
            
            <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² -->
            <VBox spacing="8" style="-fx-background-color: #f5f5f5; -fx-padding: 10; -fx-background-radius: 5;">
                <Label text="ðŸ”§ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹" style="-fx-font-weight: bold; -fx-font-size: 11;"/>
                
                <!-- Ð¡ÐµÑ‚ÐºÐ° -->
                <CheckBox fx:id="gridVisibleCheckBox" text="Ð¡ÐµÑ‚ÐºÐ°" selected="true" 
                          onAction="#handleGridVisibilityChange"/>
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Ð¨Ð°Ð³:"/>
                    <ComboBox fx:id="gridSizeComboBox" prefWidth="80" onAction="#handleGridSizeChange"/>
                    <Label text="Ð¼"/>
                </HBox>
                
                <Separator/>
                
                <!-- Ð˜Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ -->
                <CheckBox fx:id="measurementActiveCheckBox" text="ðŸ“ Ð˜Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ" 
                          onAction="#handleMeasurementActiveChange"/>
                <ComboBox fx:id="measurementModeComboBox" maxWidth="Infinity" 
                          onAction="#handleMeasurementModeChange" disable="true"/>
                <Button fx:id="clearMeasurementButton" text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" maxWidth="Infinity" 
                        onAction="#handleClearMeasurement" disable="true"/>
                <Label fx:id="measurementInfoLabel" text="Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½" 
                       wrapText="true" style="-fx-font-size: 10; -fx-text-fill: #666;"/>
            </VBox>
        </VBox>
        
        <!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ: Canvas -->
        <VBox spacing="8" HBox.hgrow="ALWAYS">
            <Label text="ðŸ—„ï¸ Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ" style="-fx-font-weight: bold;"/>
            
            <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="zoomInButton" text="ðŸ” +" onAction="#handleZoomIn" 
                        style="-fx-font-size: 14;"/>
                <Button fx:id="zoomOutButton" text="ðŸ” âˆ’" onAction="#handleZoomOut" 
                        style="-fx-font-size: 14;"/>
                <Button fx:id="zoomResetButton" text="â†º Ð¡Ð±Ñ€Ð¾Ñ" onAction="#handleZoomReset"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- ðŸ†• ÐšÐÐžÐŸÐšÐ Ð­ÐšÐ¡ÐŸÐžÐ Ð¢Ð -->
                <Button fx:id="exportButton" text="ðŸ’¾ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" 
                        onAction="#handleExport"
                        style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;"/>
            </HBox>
            
            <!-- Canvas Ñ placeholder -->
            <StackPane fx:id="canvasContainer" VBox.vgrow="ALWAYS" 
                       style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 1;">
                <Canvas fx:id="buildingCanvas"/>
                <Label fx:id="canvasPlaceholder" 
                       text="Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð·Ð´Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¿Ð»Ð°Ð½Ð°" 
                       style="-fx-text-fill: #bbb; -fx-font-size: 16;"/>
            </StackPane>
            
            <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¼ Ð·Ð´Ð°Ð½Ð¸Ð¸ -->
            <Label fx:id="selectedBuildingLabel" wrapText="true"
                   text="ÐšÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ Ð¿Ð¾ Ð·Ð´Ð°Ð½Ð¸ÑŽ Ð´Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð°. Alt+Ð›ÐšÐœ Ð½Ð° Ñ‚Ð¾Ñ‡ÐºÐµ - Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ."
                   style="-fx-font-size: 11; -fx-text-fill: #999; -fx-padding: 5 0 0 0;"/>
        </VBox>
    </HBox>
    
    <Separator/>
    
    <!-- ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ -->
    <VBox spacing="5">
        <Label text="ðŸ“ ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ñ" style="-fx-font-weight: bold;"/>
        <TextArea fx:id="notesArea" prefRowCount="2" wrapText="true" 
                  promptText="Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ..."/>
    </VBox>
    
    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
    <HBox spacing="10" alignment="CENTER_RIGHT">
        <Button fx:id="clearButton" text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" onAction="#handleClear" 
                style="-fx-min-width: 100;"/>
        <Button fx:id="saveButton" text="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" onAction="#handleSave" 
                style="-fx-min-width: 100; -fx-background-color: #4CAF50; -fx-text-fill: white;"/>
    </HBox>
    
</VBox>
